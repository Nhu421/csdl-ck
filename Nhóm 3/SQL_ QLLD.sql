CREATE DATABASE QL_LaoDong
ON PRIMARY
(NAME=QLLD_Data, 
 FILENAME='D:\BTSQL\QLLD_Data.mdf',
 SIZE=10MB,
 MAXSIZE=15MB,
 FILEGROWTH=20%)
LOG ON
 ( NAME=QLLD_Log,
 FILENAME= 'D:\BTSQL\QLLD_Log.ldf',
 SIZE=3MB,
 MAXSIZE=5MB,
 FILEGROWTH=1MB)
GO
 USE QL_LaoDong;
GO
-- Bảng PHONGBAN
CREATE TABLE PHONGBAN (
    MAPB CHAR(5) PRIMARY KEY,
    TENPB NVARCHAR(100)
);

-- Bảng NHANVIEN
CREATE TABLE NHANVIEN (
    MANV CHAR(5) PRIMARY KEY,
    HOTEN NVARCHAR(100),
    NGAYSINH DATE,
    PHAI NVARCHAR(3),
    DIACHI NVARCHAR(200),
    MAPB CHAR(5),
    FOREIGN KEY (MAPB) REFERENCES PHONGBAN(MAPB)
);

-- Bảng CONGTRINH
CREATE TABLE CONGTRINH (
    MACT CHAR(5) PRIMARY KEY,
    TENCT NVARCHAR(100),
    DIADIEM NVARCHAR(100),
    NGAYCAPGP DATE,
    NGAYKC DATE,
    NGAYHT DATE
);

-- Bảng PHANCONG (quan hệ nhiều-nhiều)
CREATE TABLE PHANCONG (
    MANV CHAR(5),
    MACT CHAR(5),
    SLNGAYCONG INT,
    PRIMARY KEY (MANV, MACT),
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV),
    FOREIGN KEY (MACT) REFERENCES CONGTRINH(MACT)
);
GO
-- Dữ liệu bảng PHONGBAN
INSERT INTO PHONGBAN VALUES
('PB001', N'Phòng Kế Toán'),
('PB002', N'Phòng Kinh Doanh'),
('PB003', N'Phòng Kỹ Thuật'),
('PB004', N'Phòng Tổ Chức'),
('PB005', N'Phòng Phục Vụ');

-- Dữ liệu bảng NHANVIEN
INSERT INTO NHANVIEN VALUES
('NV001', N'Nguyễn Văn A', '1985-05-20', N'Nam', N'Hà Nội', 'PB001'),
('NV002', N'Trần Thị B', '1990-08-15', N'Nữ', N'Hồ Chí Minh', 'PB002'),
('NV003', N'Lê Văn C', '1988-02-10', N'Nam', N'Đà Nẵng', 'PB003'),
('NV004', N'Phạm Thị D', '1992-11-01', N'Nữ', N'Cần Thơ', 'PB004'),
('NV005', N'Hoàng Văn E', '1983-12-22', N'Nam', N'Hải Phòng', 'PB005');

-- Dữ liệu bảng CONGTRINH
INSERT INTO CONGTRINH VALUES
('CT001', N'Tòa nhà A', N'Hà Nội', '2022-01-01', '2022-02-01', '2022-12-01'),
('CT002', N'Nhà máy B', N'Hải Phòng', '2021-03-01', '2021-04-01', '2022-06-01'),
('CT003', N'Khu dân cư C', N'Hồ Chí Minh', '2020-05-01', '2020-06-01', '2021-12-31'),
('CT004', N'Cầu D', N'Đà Nẵng', '2023-02-15', '2023-03-01', '2024-01-15'),
('CT005', N'Trung tâm E', N'Cần Thơ', '2023-07-01', '2023-08-01', '2024-12-01');

-- Dữ liệu bảng PHANCONG
INSERT INTO PHANCONG VALUES
('NV001', 'CT001', 120),
('NV001', 'CT002', 90),
('NV002', 'CT003', 100),
('NV003', 'CT004', 150),
('NV004', 'CT005', 80),
('NV005', 'CT001', 60),
('NV002', 'CT002', 70),
('NV003', 'CT001', 110);

